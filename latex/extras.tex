% -------------------- COMANDOS ESPECIALES ------------------------------

\newcommand{\calcular}[2]{\pgfmathtruncatemacro{#1}{#2}}

\pgfplotsset{
  filter params/.style n args={4}{
      x filter/.code={
          \edef\tempa{\thisrow{#1}}
          \edef\tempb{#2}
          \edef\tempc{\thisrow{#3}}
          \edef\tempd{#4}
          \ifx\tempa\tempb
            \ifx\tempc\tempd
            \else
              \def\pgfmathresult{inf}
            \fi
          \else
            \def\pgfmathresult{inf}
          \fi
      }
  }
}

\newcommand{\graficarDatos}[6]{
  \begin{tikzpicture}
  \begin{axis}[
      title={#1},
      xlabel={#2},
      ylabel={#3},
      scaled x ticks=false,
      scaled y ticks=false,
      scale=0.5
  ]
  \addplot[only marks, color=black] table[x=#4,y=#5]{#6};
  \end{axis}
  \end{tikzpicture}
}

\newcommand{\graficarDatosPlus}[7]{
  \begin{tikzpicture}
  \begin{axis}[
      title={#1},
      xlabel={#2},
      ylabel={#3},
      scaled x ticks=false,
      scaled y ticks=false,
      width=0.6\textwidth,
      #7
  ]
  \addplot[only marks, color=black] table[x=#4,y=#5]{#6};
  \end{axis}
  \end{tikzpicture}
}

\makeatletter
\pgfplotsset{
    groupplot xlabel/.initial={},
    every groupplot x label/.style={
        at={($({group c1r\pgfplots@group@rows.west}|-{group c1r\pgfplots@group@rows.outer south})!0.5!({group c\pgfplots@group@columns r\pgfplots@group@rows.east}|-{group c\pgfplots@group@columns r\pgfplots@group@rows.outer south})$)},
        anchor=north,
    },
    groupplot ylabel/.initial={},
    every groupplot y label/.style={
            rotate=90,
        at={($({group c1r1.north}-|{group c1r1.outer
west})!0.5!({group c1r\pgfplots@group@rows.south}-|{group c1r\pgfplots@group@rows.outer west})$)},
        anchor=south
    },
    execute at end groupplot/.code={%
      \node [/pgfplots/every groupplot x label]
{\pgfkeysvalueof{/pgfplots/groupplot xlabel}};  
      \node [/pgfplots/every groupplot y label] 
{\pgfkeysvalueof{/pgfplots/groupplot ylabel}};  
    },
    group/only outer labels/.style =
{
group/every plot/.code = {%
    \ifnum\pgfplots@group@current@row=\pgfplots@group@rows\else%
        \pgfkeys{xticklabels = {}, xlabel = {}}\fi%
    \ifnum\pgfplots@group@current@column=1\else%
        \pgfkeys{yticklabels = {}, ylabel = {}}\fi%
}
}
}

\def\endpgfplots@environment@groupplot{%
    \endpgfplots@environment@opt%
    \pgfkeys{/pgfplots/execute at end groupplot}%
    \endgroup%
}
\makeatother

\newcommand{\barGraphThree}[5]{
\begin{tikzpicture}
  \begin{groupplot}[
      group style={
          group size=3 by 1,
          vertical sep=0pt,
          ylabels at=edge left,
          xlabels at=edge bottom,
          horizontal sep=50pt,
      },
      legend style={at={(2.0,1.0)}},
      ybar,
      scaled ticks=false,
      width=4/15*\textwidth,
      height=5/15*\textwidth,
      groupplot xlabel={Tamaño de imagen (pixel)},
      groupplot ylabel={Tiempo de ejecucion (clocks)},
      tickpos=left,
      xtick=\empty,
      ytick align=inside,
      xtick align=inside,
  ]
  \nextgroupplot[xlabel={32x32}]
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#3]{datos/datos2.dat};
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#4]{datos/datos2.dat};
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#5]{datos/datos2.dat};
  \nextgroupplot[xlabel={200x200}]
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#3]{datos/datos2.dat};
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#4]{datos/datos2.dat};
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#5]{datos/datos2.dat};
  \nextgroupplot[xlabel={512x512}]
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#3]{datos/datos2.dat};
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#4]{datos/datos2.dat};
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#5]{datos/datos2.dat};
  \legend{#3,#4,#5}
  \end{groupplot}
  \node (title) at ($(group c1r1.center)!1.0!(group c2r1.center)+(0,3cm)$) {#1};
\end{tikzpicture}
}

\newcommand{\barGraphFour}[6]{
\begin{tikzpicture}
  \begin{groupplot}[
      group style={
          group size=3 by 1,
          vertical sep=0pt,
          ylabels at=edge left,
          xlabels at=edge bottom,
          horizontal sep=50pt,
      },
      legend style={at={(2.0,1.0)}},
      ybar,
      scaled ticks=false,
      width=4/15*\textwidth,
      height=5/15*\textwidth,
      groupplot xlabel={Tamaño de imagen (pixel)},
      groupplot ylabel={Tiempo de ejecucion (clocks)},
      tickpos=left,
      xtick=\empty,
      ytick align=inside,
      xtick align=inside,
  ]
  \nextgroupplot[xlabel={32x32}]
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#3]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#4]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#5]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{32}] table[x=h, y=#6]{datos/datos.dat};
  \nextgroupplot[xlabel={200x200}]
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#3]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#4]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#5]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{200}] table[x=h, y=#6]{datos/datos.dat};
  \nextgroupplot[xlabel={512x512}]
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#3]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#4]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#5]{datos/datos.dat};
      \addplot+[filter params={tipo}{#2}{h}{512}] table[x=h, y=#6]{datos/datos.dat};
  \legend{#3,#4,#5,#6}
  \end{groupplot}
  \node (title) at ($(group c1r1.center)!1.0!(group c2r1.center)+(0,3cm)$) {#1};
\end{tikzpicture}
}

% ------------------------------------------------------------------------
